{"ast":null,"code":"import { SET_LOGIN_MODAL_WINDOW, GET_USER_LOADING, GET_USER_LOADED, GET_USER_FAILURE, LOGIN_LOADING, LOGIN_SUCCESS, LOGIN_FAILURE, LOGOUT_SUCCESS, LOGOUT_FAILURE } from '../redux/action-types';\nimport axios from 'axios';\nconst link = 'http://127.0.0.1:8000/api/';\nexport const setLoginModalWindow = data => ({\n  type: SET_LOGIN_MODAL_WINDOW,\n  payload: data\n});\nexport const getUser = () => (dispatch, getState) => {\n  dispatch({\n    type: GET_USER_LOADING\n  });\n  const token = getState().auth.token;\n\n  if (!token) {\n    return dispatch({\n      type: GET_USER_FAILURE\n    });\n  }\n\n  axios.post(`${link}accounts/user/`, null, {\n    headers: {\n      'Authorization': `token ${token}`,\n      'Content-Type': 'application/json'\n    }\n  }).then(res => dispatch({\n    type: GET_USER_LOADED,\n    payload: res.data\n  }));\n};\nexport const login = data => dispatch => {\n  dispatch({\n    type: LOGIN_LOADING\n  });\n  axios.post(`${link}accounts/login/`, data).then(res => {\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: res.data\n    });\n    dispatch(setLoginModalWindow(false));\n  }).catch(err => {\n    console.log(err);\n    const errors = err.response.data;\n    const errorsObj = Object.values(errors);\n    dispatch({\n      type: LOGIN_FAILURE,\n      payload: errorsObj\n    });\n  });\n};\nexport const logout = data => dispatch => {\n  const token = localStorage.getItem('token');\n  axios.post(`${link}accounts/logout/`, null, {\n    headers: {\n      'Authorization': `token ${token}`,\n      'Content-Type': 'application/json'\n    }\n  }).then(() => {\n    dispatch({\n      type: LOGOUT_SUCCESS\n    });\n  }).catch(err => {\n    const errors = err.response.data;\n    const errorsObj = Object.values(errors);\n    dispatch({\n      type: LOGOUT_FAILURE,\n      payload: errorsObj\n    });\n  });\n};","map":{"version":3,"sources":["C:/Users/zcczz/Desktop/online_store_v2/online_store_v2/front/src/redux/actions.js"],"names":["SET_LOGIN_MODAL_WINDOW","GET_USER_LOADING","GET_USER_LOADED","GET_USER_FAILURE","LOGIN_LOADING","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT_SUCCESS","LOGOUT_FAILURE","axios","link","setLoginModalWindow","data","type","payload","getUser","dispatch","getState","token","auth","post","headers","then","res","login","catch","err","console","log","errors","response","errorsObj","Object","values","logout","localStorage","getItem"],"mappings":"AAAA,SACIA,sBADJ,EAEIC,gBAFJ,EAGIC,eAHJ,EAIIC,gBAJJ,EAKIC,aALJ,EAMIC,aANJ,EAOIC,aAPJ,EAQIC,cARJ,EASIC,cATJ,QAUO,uBAVP;AAWA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,IAAI,GAAG,4BAAb;AAEA,OAAO,MAAMC,mBAAmB,GAAGC,IAAI,KAAK;AACxCC,EAAAA,IAAI,EAAEb,sBADkC;AACVc,EAAAA,OAAO,EAAEF;AADC,CAAL,CAAhC;AAIP,OAAO,MAAMG,OAAO,GAAG,MAAM,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAEjDD,EAAAA,QAAQ,CAAC;AAAEH,IAAAA,IAAI,EAAEZ;AAAR,GAAD,CAAR;AAEA,QAAMiB,KAAK,GAAGD,QAAQ,GAAGE,IAAX,CAAgBD,KAA9B;;AAEA,MAAI,CAACA,KAAL,EAAY;AACR,WAAOF,QAAQ,CAAC;AAAEH,MAAAA,IAAI,EAAEV;AAAR,KAAD,CAAf;AACH;;AAEDM,EAAAA,KAAK,CAACW,IAAN,CAAY,GAAEV,IAAK,gBAAnB,EAAoC,IAApC,EAA0C;AACtCW,IAAAA,OAAO,EAAE;AACL,uBAAkB,SAAQH,KAAM,EAD3B;AAEL,sBAAgB;AAFX;AAD6B,GAA1C,EAMKI,IANL,CAMUC,GAAG,IAAIP,QAAQ,CAAC;AAAEH,IAAAA,IAAI,EAAEX,eAAR;AAAyBY,IAAAA,OAAO,EAAES,GAAG,CAACX;AAAtC,GAAD,CANzB;AAOH,CAjBM;AAmBP,OAAO,MAAMY,KAAK,GAAGZ,IAAI,IAAII,QAAQ,IAAI;AAErCA,EAAAA,QAAQ,CAAC;AAAEH,IAAAA,IAAI,EAAET;AAAR,GAAD,CAAR;AAEAK,EAAAA,KAAK,CAACW,IAAN,CAAY,GAAEV,IAAK,iBAAnB,EAAqCE,IAArC,EACKU,IADL,CACUC,GAAG,IAAI;AACTP,IAAAA,QAAQ,CAAC;AAAEH,MAAAA,IAAI,EAAER,aAAR;AAAuBS,MAAAA,OAAO,EAAES,GAAG,CAACX;AAApC,KAAD,CAAR;AACAI,IAAAA,QAAQ,CAACL,mBAAmB,CAAC,KAAD,CAApB,CAAR;AACH,GAJL,EAKKc,KALL,CAKWC,GAAG,IAAI;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,UAAMG,MAAM,GAAGH,GAAG,CAACI,QAAJ,CAAalB,IAA5B;AACA,UAAMmB,SAAS,GAAGC,MAAM,CAACC,MAAP,CAAcJ,MAAd,CAAlB;AACAb,IAAAA,QAAQ,CAAC;AACLH,MAAAA,IAAI,EAAEP,aADD;AACgBQ,MAAAA,OAAO,EAAEiB;AADzB,KAAD,CAAR;AAGH,GAZL;AAaH,CAjBM;AAmBP,OAAO,MAAMG,MAAM,GAAGtB,IAAI,IAAII,QAAQ,IAAI;AAEtC,QAAME,KAAK,GAAGiB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AAEA3B,EAAAA,KAAK,CAACW,IAAN,CAAY,GAAEV,IAAK,kBAAnB,EAAsC,IAAtC,EAA4C;AACxCW,IAAAA,OAAO,EAAE;AACL,uBAAkB,SAAQH,KAAM,EAD3B;AAEL,sBAAgB;AAFX;AAD+B,GAA5C,EAMKI,IANL,CAMU,MAAM;AACRN,IAAAA,QAAQ,CAAC;AAAEH,MAAAA,IAAI,EAAEN;AAAR,KAAD,CAAR;AACH,GARL,EASKkB,KATL,CASWC,GAAG,IAAI;AACV,UAAMG,MAAM,GAAGH,GAAG,CAACI,QAAJ,CAAalB,IAA5B;AACA,UAAMmB,SAAS,GAAGC,MAAM,CAACC,MAAP,CAAcJ,MAAd,CAAlB;AACAb,IAAAA,QAAQ,CAAC;AACLH,MAAAA,IAAI,EAAEL,cADD;AACiBM,MAAAA,OAAO,EAAEiB;AAD1B,KAAD,CAAR;AAGH,GAfL;AAgBH,CApBM","sourcesContent":["import {\r\n    SET_LOGIN_MODAL_WINDOW,\r\n    GET_USER_LOADING,\r\n    GET_USER_LOADED,\r\n    GET_USER_FAILURE,\r\n    LOGIN_LOADING,\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAILURE,\r\n    LOGOUT_SUCCESS,\r\n    LOGOUT_FAILURE\r\n} from '../redux/action-types';\r\nimport axios from 'axios';\r\n\r\nconst link = 'http://127.0.0.1:8000/api/';\r\n\r\nexport const setLoginModalWindow = data => ({\r\n    type: SET_LOGIN_MODAL_WINDOW, payload: data\r\n})\r\n\r\nexport const getUser = () => (dispatch, getState) => {\r\n\r\n    dispatch({ type: GET_USER_LOADING })\r\n\r\n    const token = getState().auth.token;\r\n\r\n    if (!token) {\r\n        return dispatch({ type: GET_USER_FAILURE })\r\n    }\r\n\r\n    axios.post(`${link}accounts/user/`, null, {\r\n        headers: {\r\n            'Authorization': `token ${token}`,\r\n            'Content-Type': 'application/json'\r\n        }\r\n    })\r\n        .then(res => dispatch({ type: GET_USER_LOADED, payload: res.data }))\r\n}\r\n\r\nexport const login = data => dispatch => {\r\n\r\n    dispatch({ type: LOGIN_LOADING })\r\n\r\n    axios.post(`${link}accounts/login/`, data)\r\n        .then(res => {\r\n            dispatch({ type: LOGIN_SUCCESS, payload: res.data })\r\n            dispatch(setLoginModalWindow(false))\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n            const errors = err.response.data;\r\n            const errorsObj = Object.values(errors);\r\n            dispatch({\r\n                type: LOGIN_FAILURE, payload: errorsObj\r\n            })\r\n        })\r\n}\r\n\r\nexport const logout = data => dispatch => {\r\n\r\n    const token = localStorage.getItem('token')\r\n\r\n    axios.post(`${link}accounts/logout/`, null, {\r\n        headers: {\r\n            'Authorization': `token ${token}`,\r\n            'Content-Type': 'application/json'\r\n        }\r\n    })\r\n        .then(() => {\r\n            dispatch({ type: LOGOUT_SUCCESS})\r\n        })\r\n        .catch(err => {\r\n            const errors = err.response.data;\r\n            const errorsObj = Object.values(errors);\r\n            dispatch({\r\n                type: LOGOUT_FAILURE, payload: errorsObj\r\n            })\r\n        })\r\n}"]},"metadata":{},"sourceType":"module"}